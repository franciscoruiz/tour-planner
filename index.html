<!DOCTYPE html>
<html ng-app="planner">
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Tour planner</title>
    <link rel="stylesheet" href="app.css">

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular-resource.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

    <script src="settings.js"></script>
    <script src="app.js"></script>
    <script src="services.js"></script>
    <script src="controllers.js"></script>
    <script src="resources.js"></script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <div class="overmap_panel" ng-controller="RoutesCtrl">
      <div>
        <h2>Add</h2>
        <form name="routeForm" ng-controller="NewRouteFormCtrl as controller">
          <input name="origin" ng-model="route.origin" required placeholder="Origin">
          <input name="destination" ng-model="route.destination" required placeholder="Destination">
          <input
            name="waypoints"
            ng-repeat="waypoint in route.waypoints"
            ng-model="waypoint.location"
            placeholder="Waypoint"
            >
          <a ng-click="controller.addWaypoint(route)">Add waypoint</a>
          <button ng-click="controller.showRoute(route)" ng-disabled="!routeForm.$valid">Calculate</button>
          <button ng-click="controller.saveRoute(route)">Save</button>
        </form>
      </div>
      <div>
        <h2>Routes</h2>
        <ul>
          <li ng-repeat="route in routes | orderBy:'bounds.southWest.lat'" ng-controller="RouteCtrl as controller">
            <a ng-if="controller.isRouteOnMap(route)" ng-click="controller.hideRoute(route)">[hide]</a>
            <a ng-if="!controller.isRouteOnMap(route)" ng-click="controller.showRoute(route)">[show]</a>
            <a ng-click="controller.showRouteDetails(route)">[details]</a>
            <a ng-click="controller.deleteRoute(route)">[delete]</a>
            {{ route.name }}
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
